<script>

  $('#edit_task_modal_submit_btn').on('click', function(e){
    e.preventDefault();
    var id = $(this).parent().parent().data("edit-task-id");
    var title = $(this).parent().find("#edit_task_title").val();
    var info = $(this).parent().find("#edit_task_info").val();
    var start_time = $(this).parent().find("#edit_task_start_time").val();
    var notification = $(this).parent().find("#edit_task_notification").val();
    var url = $(this).parent().attr("action");
    var closeModal = $(this).parent().parent();

    $.ajax({
      url: url + "/" + id,
      type: 'PATCH',
      data: {
        task: {
          title: title,
          info: info,
          start_time: start_time,
          notification: notification
        }
      },
      headers: {
        'X-CSRF-Token' : $('meta[name="csrf-token"]').attr('content')
      },
      dateType: 'json'
    })
    .done( function(data) {
      closeModal.hide();
      console.log(data);
      $("#task_index").html(data);
    })
    .fail( function() {
      alert('通信nに失敗しました');
    })
  })

</script>